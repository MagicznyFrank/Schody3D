{% extends 'base.html' %}

{% block content %}
<div class="form-container"><div class="form-container-background">
    <h1>{% block title %}Generator {% endblock %}</h1>
    <form method="post" onsubmit="return validateForm()">
        <label>
            <input type="text" name="Długość stopnia (mm)" placeholder="Długość stopnia w mm">
        </label>
        <label>
            <input type="text" name="Szerokość stopnia (mm)" placeholder="Szerokość stopnia w mm">
        </label>
        <label>
            <input type="text" name="Wysokość stopnia (mm)" placeholder="Wysokość stopnia w mm">
        </label>
        <label>
            <input type="text"  name="Wysokość między stopniami (mm)" placeholder="Wysokość między stopniami w mm">
        </label>
        <label>
            <input type="text" name="Ilość stopni" placeholder="Ilość stopni">
        </label>
        <button type="submit" id="submitButton">Stwórz!</button>
    </form>

    <script>
        function validateForm() {
            let inputs = document.querySelectorAll('input[type="text"]');
            let button = document.getElementById('submitButton');

            for (let i = 0; i < inputs.length; i++) {
                let inputValue = inputs[i].value.trim();

                if (inputValue === '') {
                    alert('Wprowadź wszystkie wymagane dane!');
                    return false;
                }

                if (!/^\d+$/.test(inputValue) || parseInt(inputValue) <= 0) {
                    alert('Wprowadź liczbę całkowitą nieujemną różną od zera!');
                    return false;
                }

                switch (inputs[i].name) {
                    case 'Długość stopnia (mm)':
                        if (parseInt(inputValue) >= 5000) {
                            alert('Długość stopnia musi być mniejsza niż 5000!');
                            return false;
                        }
                        break;
                    case 'Szerokość stopnia (mm)':
                        if (parseInt(inputValue) >= 5000) {
                            alert('Szerokość stopnia musi być mniejsza niż 5000!');
                            return false;
                        }
                        break;
                    case 'Wysokość stopnia (mm)':
                        if (parseInt(inputValue) >= 1000) {
                            alert('Wysokość stopnia musi być mniejsza niż 1000!');
                            return false;
                        }
                        break;
                    case 'Wysokość między stopniami (mm)':
                        if (parseInt(inputValue) >= 500) {
                            alert('Wysokość między stopniami musi być mniejsza niż 500!');
                            return false;
                        }
                        break;
                    case 'Ilość stopni':
                        if (parseInt(inputValue) >= 30) {
                            alert('Ilość stopni musi być mniejsza niż 30!');
                            return false;
                        }
                        break;
                    default:
                        break;
                }
            }

            // Wyłącz przycisk
            button.disabled = true;

            // Włącz przycisk po 15 sekundach
            setTimeout(function () {
                button.disabled = false;
            }, 15000);

            return true;
        }
    </script>
</div>
</div>
{% endblock %}
